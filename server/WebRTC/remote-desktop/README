## gstwebrtc
cd /home/server/Desktop/web-3d/server/WebRTC/remote-desktop/gst

./main.py --debug

## Signalling

cd /home/server/Desktop/gstwebrtc-demos/signalling/

./simple_server.py --disable-ssl


## Web APP

cd /home/server/Desktop/web-3d/server/WebRTC/remote-desktop/web
http-server -c-1

## Start firefox

firefox --kiosk https://threejs.org/examples/?q=fb#webgl_loader_fbx

## Detect X Window idle
xwininfo
wmctrl -l | grep -i firefox | awk '{print $1}'



TODO:
* Keep checking sendrecv in order to understand how signalling works (DONE)
* Check webrtc web app and try to change it in order to work (DONE)
* Fix encoder for CUDA link (DONE, Cuda wasnt installed)
* Fix signalling between devices
* Test different pipelines without cuda



## Problems:
* Web not establishing connection with signalling server
* Cuda Coverter not working (Possible wrong GStreamer version?)
* Check gstreamer uninstalled

## Command to check nvenc
gst-inspect-1.0 nvcodec
GST_DEBUG=nvdec*:6,nvenc*:6 gst-inspect-1.0 --plugin nvcode

## This pipeline gives same exact error:
gst-launch-1.0 filesrc location=test.mp4 ! qtdemux ! h264parse ! nvh264dec ! cudascale ! "video/x-raw(memory:CUDAMemory),width=1280,height=720" ! nvh264enc ! h264parse ! mp4mux ! filesink location=out.mp4


## Some examples GST Pipeline:
GST_DEBUG=default:5 gst-launch-1.0 ximagesrc startx=1280 use-damage=0 xid=0x2200002 ! video/x-raw,framerate=30/1 ! videoscale method=0 ! video/x-raw,width=640,height=480 ! ximagesink

GST_DEBUG=cuda*:7 gst-launch-1.0 ximagesrc ! videoscale ! video/x-raw,width=1280,height=720 ! cudaupload ! cudaconvert ! 'video/x-raw(memory:CUDAMemory),format=I420' ! fakesink


## Others
docker run -it --rm --gpus all --env="DISPLAY" --volume="/tmp/.X11-unix:/tmp/.X11-unix:rw" --network=host gst-webrtc-app

export PATH=/usr/local/cuda-11.2/bin${PATH:+:${PATH}}